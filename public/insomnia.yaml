_type: export
__export_format: 4
__export_date: 2021-12-13T21:52:14.756Z
__export_source: insomnia.desktop.app:v2021.7.0
resources:
  - _id: req_wrk_90d4d590fb5a4034b3d98b7c089648520e5d7dae
    parentId: wrk_90d4d590fb5a4034b3d98b7c08964852
    modified: 1639432322903
    created: 1637965624524
    url: '{{ base_url }}/calculateEligibility'
    name: Calculate eligibility
    description: ''
    method: GET
    body: {}
    parameters:
      - name: income
        value: '10000'
      - name: age
        value: '65'
      - name: maritalStatus
        value: Married
      - name: partnerIncome
        value: '10000'
      - name: partnerReceivingOas
        value: 'true'
      - name: livingCountry
        value: Canada
      - name: legalStatus
        value: Canadian citizen
      - name: yearsInCanadaSince18
        value: '40'
      - name: everLivedSocialCountry
        value: 'true'
    headers: []
    authentication: {}
    metaSortKey: -1637965624524
    isPrivate: false
    settingStoreCookies: true
    settingSendCookies: true
    settingDisableRenderRequestBody: false
    settingEncodeUrl: true
    settingRebuildPath: true
    settingFollowRedirects: global
    _type: request
  - _id: wrk_90d4d590fb5a4034b3d98b7c08964852
    parentId: null
    modified: 1637016450873
    created: 1637016450873
    name: eligibility-estimator.yaml
    description: ''
    scope: design
    _type: workspace
  - _id: env_e85c84355a7e428ff3e7002e5d1e8146fed429b0
    parentId: wrk_90d4d590fb5a4034b3d98b7c08964852
    modified: 1637963607236
    created: 1637016450884
    name: Base Environment
    data:
      base_url: '{{ scheme }}://{{ host }}{{ base_path }}'
    dataPropertyOrder:
      '&':
        - base_url
    color: null
    isPrivate: false
    metaSortKey: 1637016450884
    _type: environment
  - _id: jar_e85c84355a7e428ff3e7002e5d1e8146fed429b0
    parentId: wrk_90d4d590fb5a4034b3d98b7c08964852
    modified: 1637016450890
    created: 1637016450890
    name: Default Jar
    cookies: []
    _type: cookie_jar
  - _id: spc_8baaccaea9424f4b84a71dd08f84ee16
    parentId: wrk_90d4d590fb5a4034b3d98b7c08964852
    modified: 1639432326196
    created: 1637016450877
    fileName: eligibility-estimator-openapi
    contents: >
      openapi: 3.0.3

      info:
        title: Benefits Eligibility Estimator API
        version: '1.0'
        description: >
          Calculates eligibility for OAS, GIS, and more. Support for entitlement value is coming soon.


          Please note that this is simply a testing interface for the backend API, and is not meant to serve as a user-facing frontend interface.


          The code for this project is available [here](https://github.com/DTS-STN/eligibility-estimator).


          **To interact with the API, click the "Try it out" button below on the right.**

      servers:
        - url: /api
          description: Current domain (default)
        - url: https://eligibility-estimator.vercel.app/api
          description: 'Main production site'
        - url: https://eligibility-estimator-dev.vercel.app/api
          description: 'Main development site'
        - url: http://localhost:3000/api
          description: 'Local developer environment'

      paths:
        /calculateEligibility:
          get:
            summary: Calculate eligibility
            description: Calculates eligibility for all benefits given a certain set of parameters.
            tags:
              - Endpoints
            parameters:
              - $ref: '#/components/parameters/income'
              - $ref: '#/components/parameters/age'
              - $ref: '#/components/parameters/livingCountry'
              - $ref: '#/components/parameters/legalStatus'
              - $ref: '#/components/parameters/yearsInCanadaSince18'
              - $ref: '#/components/parameters/maritalStatus'
              - $ref: '#/components/parameters/partnerIncome'
              - $ref: '#/components/parameters/partnerReceivingOas'
              - $ref: '#/components/parameters/everLivedSocialCountry'
            responses:
              '200':
                $ref: '#/components/responses/200'
              '400':
                $ref: '#/components/responses/400'

      components:
        schemas:
          Fields:
            type: array
            description: A list of fields that the frontend should display.
            items:
              type: string
              enum:
                - age
                - livingCountry
                - legalStatus
                - yearsInCanadaSince18
                - maritalStatus
                - partnerReceivingOas
                - income
                - everLivedSocialCountry

          ResultOptions:
            type: string
            description: A summary of the resulting eligibility calculation
            format: string
            enum:
              - Eligible!
              - Ineligible!
              - Conditionally eligible...
              - Need more information...
              - Request is invalid!

          ResultReasons:
            type: string
            description: The reason for the provided outcome
            format: string
            enum:
              - You meet the criteria
              - Age does not meet requirement for this benefit
              - Not enough years in Canada
              - Not a Canadian citizen
              - Not in a country with a social agreement
              - Need more information...
              - Not eligible for OAS
              - Income too high
              - Your marital status does not meet the requirement for this benefit

          ResultObject:
            type: object
            description: The calculated results for a given benefit
            required:
              - eligibilityResult
              - entitlementResult
              - reason
              - detail
            properties:
              eligibilityResult:
                $ref: '#/components/schemas/ResultOptions'
              entitlementResult:
                type: number
                example: 500
              reason:
                $ref: '#/components/schemas/ResultReasons'
              detail:
                type: string
                example: Based on the information provided, you are eligible!
              missingFields:
                $ref: '#/components/schemas/Fields'

          ResponseObject:
            type: object
            description: The overall eligibility results, plus a list of fields that the frontend should display
            required:
              - oas
              - gis
              - allowance
              - afs
              - visibleFields
            properties:
              oas:
                $ref: '#/components/schemas/ResultObject'
              gis:
                $ref: '#/components/schemas/ResultObject'
              allowance:
                $ref: '#/components/schemas/ResultObject'
              afs:
                $ref: '#/components/schemas/ResultObject'
              visibleFields:
                $ref: '#/components/schemas/Fields'

          ErrorResponseObject:
            type: object
            description: Error details for the failed request
            required:
              - error
              - detail
            properties:
              error:
                type: string
                example: Request is invalid!
              detail:
                type: object

        responses:
          '200':
            description: >
              Successful request and response. Returns the overall eligibility results, plus a list of fields that the frontend should display.


              _Note that "afs" means "Allowance for Survivor"._
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ResponseObject'
                examples:
                  'Standard case':
                    value:
                      oas:
                        eligibilityResult: Eligible!
                        entitlementResult: 0
                        reason: You meet the criteria
                        detail: Based on the information provided, you are eligible for OAS!
                      gis:
                        eligibilityResult: Eligible!
                        entitlementResult: 0
                        reason: You meet the criteria
                        detail: Based on the information provided, you are eligible for GIS!
                      allowance:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Age does not meet requirement for this benefit
                        detail: You must be between 60 and 64 to be eligible for Allowance.
                      afs:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Age does not meet requirement for this benefit
                        detail: You must be between 60 and 64 to be eligible for Allowance for Survivor.
                      visibleFields:
                        - income
                        - age
                        - livingCountry
                        - legalStatus
                        - yearsInCanadaSince18
                        - maritalStatus
                        - partnerReceivingOas

                  'Blank request':
                    value:
                      oas:
                        eligibilityResult: Need more information...
                        entitlementResult: 0
                        reason: Need more information...
                        detail: Missing 1 required field.
                        missingFields:
                          - income
                      gis:
                        eligibilityResult: Need more information...
                        entitlementResult: 0
                        reason: Need more information...
                        detail: Missing 1 required field.
                        missingFields:
                          - income
                      allowance:
                        eligibilityResult: Need more information...
                        entitlementResult: 0
                        reason: Need more information...
                        detail: Missing 1 required field.
                        missingFields:
                          - income
                      afs:
                        eligibilityResult: Need more information...
                        entitlementResult: 0
                        reason: Need more information...
                        detail: Missing 1 required field.
                        missingFields:
                          - income
                      visibleFields:
                        - income

                  'Ineligible case':
                    value:
                      oas:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Income too high
                        detail: Your income is too high to be eligible for OAS.
                      gis:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Not eligible for OAS
                        detail: You need to be eligible for OAS to be eligible for GIS.
                      allowance:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Age does not meet requirement for this benefit
                        detail: You must be between 60 and 64 to be eligible for Allowance.
                      afs:
                        eligibilityResult: Ineligible!
                        entitlementResult: 0
                        reason: Age does not meet requirement for this benefit
                        detail: You must be between 60 and 64 to be eligible for Allowance for Survivor.
                      visibleFields:
                        - income
                        - age
                        - livingCountry
                        - legalStatus
                        - yearsInCanadaSince18
                        - maritalStatus
                        - partnerReceivingOas

          '400':
            description: Invalid request, typically because the input did not pass the validation rules.
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponseObject'
                examples:
                  'Years in Canada validation':
                    value:
                      error: Request is invalid!
                      detail:
                        message: Years in Canada should be no more than age minus 18
                        path:
                          - yearsInCanadaSince18
                        type: number.max
                  'Maximum age validation':
                    value:
                      error: Request is invalid!
                      detail:
                        message: '"age" must be less than or equal to 150'
                        path:
                          - age
                        type: number.max

        parameters:
          income:
            name: income
            in: query
            description: >
              The client's current net income.


              _Note: This should include the client's combined income, and/or partner's income, if applicable._
            required: true
            example: 10000
            schema:
              type: integer
              description: Income in Canadian dollars.
            allowEmptyValue: false

          age:
            name: age
            in: query
            description: The current age of the client, up to a max of 150.
            required: false
            schema:
              type: integer
              description: Age, up to a max of 150.
              example: 65
              maximum: 150
            allowEmptyValue: false

          livingCountry:
            name: livingCountry
            in: query
            description: >
              The country that the client is currently living in.


              _For testing purposes, "Agreement" and "No agreement" are options._
            required: false
            allowEmptyValue: false
            schema:
              type: string
              description: Any country
              example: Canada
              enum:
                - Canada
                - Agreement
                - No agreement
                - Any other country

          legalStatus:
            name: legalStatus
            in: query
            description: The current legal status of the client.
            required: false
            example: Canadian citizen
            schema:
              type: string
              enum:
                - Canadian citizen
                - Permanent resident or landed immigrant (non-sponsored)
                - Permanent resident or landed immigrant (sponsored)
                - Indian status or status card
                - Other
              description: The current legal status of the client.
            allowEmptyValue: false

          yearsInCanadaSince18:
            name: yearsInCanadaSince18
            in: query
            description: >
              How many years the client has lived in Canada since the age of 18.


              _Note that this can not be greater than `age - 18`._
            required: false
            example: 40
            schema:
              type: integer
              description: Years, up to a max of 100.
              maximum: 100
            allowEmptyValue: false

          maritalStatus:
            name: maritalStatus
            in: query
            description: The current marital status of the client.
            required: false
            example: Married
            schema:
              type: string
              enum:
                - Single
                - Married
                - Common-law
                - Widowed
                - Divorced
                - Separated
              description: The current marital status of the client.
            allowEmptyValue: false

          partnerIncome:
            name: partnerIncome
            in: query
            description: >
              What is your partner's annual net income in Canadian dollars?


              _Note: This can be provided only when marital status is Married or Common-Law._
            required: false
            example: 10000
            schema:
              type: integer
              description: Income in Canadian dollars.
            allowEmptyValue: false

          partnerReceivingOas:
            name: partnerReceivingOas
            in: query
            description: >
              Is the client's partner receiving OAS?


              _Note: This can be "true" only when marital status is Married or Common-Law._
            required: false
            example: false
            schema:
              type: boolean
            allowEmptyValue: false

          everLivedSocialCountry:
            name: everLivedSocialCountry
            in: query
            description: Has the client ever lived in a country with a social agreement? [link of countries to be included]
            required: false
            example: true
            schema:
              type: boolean
            allowEmptyValue: false
    contentType: yaml
    _type: api_spec
  - _id: env_env_e85c84355a7e428ff3e7002e5d1e8146fed429b0_sub
    parentId: env_e85c84355a7e428ff3e7002e5d1e8146fed429b0
    modified: 1639429002812
    created: 1637342147321
    name: Prod env
    data:
      scheme: https
      base_path: /api
      host: eligibility-estimator.vercel.app
    dataPropertyOrder:
      '&':
        - scheme
        - base_path
        - host
    color: null
    isPrivate: false
    metaSortKey: 1637342147321
    _type: environment
  - _id: env_e4bbab0d34a74edb8c6d1c0ae7ad0cf2
    parentId: env_e85c84355a7e428ff3e7002e5d1e8146fed429b0
    modified: 1639429004155
    created: 1637633131081
    name: Local env
    data:
      scheme: http
      base_path: /api
      host: localhost:3000
    dataPropertyOrder:
      '&':
        - scheme
        - base_path
        - host
    color: null
    isPrivate: false
    metaSortKey: 1637342147371
    _type: environment
  - _id: env_caaf3e25e5e1424ebecd70a3666e20ed
    parentId: env_e85c84355a7e428ff3e7002e5d1e8146fed429b0
    modified: 1639429003487
    created: 1637965573028
    name: Dev env
    data:
      scheme: https
      base_path: /api
      host: eligibility-estimator-dev.vercel.app
    dataPropertyOrder:
      '&':
        - scheme
        - base_path
        - host
    color: null
    isPrivate: false
    metaSortKey: 1637342147346
    _type: environment
